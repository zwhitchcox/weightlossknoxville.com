---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogCard from "../../components/BlogCard.astro";

const allPosts = await getCollection("blog");
const posts = allPosts
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout
  title="Weight Loss Blog | Tips & Insights | Weight Loss Knox"
  description="Expert weight loss tips, medication guides, and wellness insights from Weight Loss Knox in Knoxville, TN. Stay informed on tirzepatide, semaglutide, nutrition, and more."
>
  <section class="py-16 md:py-24 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-[#1B4D3E] mb-6">
        Weight Loss Blog
      </h1>
      <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto">
        Evidence-based insights, medication guides, and practical tips from our
        Knoxville medical weight loss team to support your journey toward lasting
        health.
      </p>
    </div>
  </section>

  <section class="py-16 md:py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      {
        posts.length === 0 ? (
          <p class="text-center text-gray-500 text-lg">
            No posts yet. Check back soon!
          </p>
        ) : (
          <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
            {posts.map((post) => (
              <BlogCard
                title={post.data.title}
                description={post.data.description}
                pubDate={post.data.pubDate}
                slug={post.id}
                image={post.data.heroImage}
              />
            ))}
          </div>
        )
      }
    </div>
  </section>
</BaseLayout>
