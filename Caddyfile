:8080 {
	root * /srv
	file_server

	# Enable gzip/zstd compression
	encode zstd gzip

	# Security headers
	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		Referrer-Policy "strict-origin-when-cross-origin"
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
	}

	# Cache static assets aggressively (CSS, JS, images, fonts)
	@static path *.css *.js *.svg *.png *.jpg *.jpeg *.gif *.webp *.avif *.ico *.woff *.woff2 *.ttf
	header @static Cache-Control "public, max-age=31536000, immutable"

	# Cache HTML pages for a short time so updates propagate quickly
	@html path *.html /
	header @html Cache-Control "public, max-age=3600, must-revalidate"

	# Sitemap and robots
	@seo path /sitemap*.xml /robots.txt
	header @seo Cache-Control "public, max-age=86400"

	# Handle trailing slash: /about -> /about/index.html
	try_files {path} {path}/ {path}/index.html /index.html
}
